(this["webpackJsonpreact-2-crud"]=this["webpackJsonpreact-2-crud"]||[]).push([[0],{16:function(e,t,n){e.exports={errorMsg:"PersonInfoModal_errorMsg__3H0hM",formControl:"PersonInfoModal_formControl__3-5Js",invalidInput:"PersonInfoModal_invalidInput__3f9qO"}},17:function(e,t,n){e.exports={peopleTable:"PeopleTable_peopleTable__QV_eR",idCol:"PeopleTable_idCol__2kc6S",firstnameCol:"PeopleTable_firstnameCol__17pBl",lastnameCol:"PeopleTable_lastnameCol__3Bi_1",emailCol:"PeopleTable_emailCol__2dvg3",actionsCol:"PeopleTable_actionsCol__3WVfX"}},21:function(e,t,n){e.exports={apiWarnings:"APIWarning_apiWarnings__34-vp",titleRow:"APIWarning_titleRow__20Wgj",warningIconContainer:"APIWarning_warningIconContainer__2yv_j",warningIcon:"APIWarning_warningIcon__1grEW",warningTitle:"APIWarning_warningTitle__2l28a"}},23:function(e,t,n){e.exports={idBadge:"DisplayPersonModal_idBadge__Z5p5X",profileImage:"DisplayPersonModal_profileImage__2_p1F",personDetails:"DisplayPersonModal_personDetails__2mpKq",personName:"DisplayPersonModal_personName__dMtYw"}},31:function(e,t,n){e.exports={headerContent:"Header_headerContent__3qinn",titleIcon:"Header_titleIcon__1B-X7",title:"Header_title__1ZkuB"}},32:function(e,t,n){e.exports={peopleHeaderRow:"PeopleHeader_peopleHeaderRow__8fCNV",contentTitle:"PeopleHeader_contentTitle__37wEG",addBtn:"PeopleHeader_addBtn__1Bk3u"}},33:function(e,t,n){e.exports={actionBtn:"PersonTableRow_actionBtn__dXGV1"}},34:function(e,t,n){e.exports={root:"App_root__1eWKM",App:"App_App__3IzzO",content:"App_content__3uxtB",footer:"App_footer__2NaWM"}},39:function(e,t,n){e.exports={copyright:"Copyright_copyright__710dx"}},40:function(e,t,n){e.exports={footer:"Footer_footer__2Uma1"}},49:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(15),o=n.n(c),r=(n(49),n(12)),i=n(42),l="https://www.mecallapi.com/users/cat.png",d=function(e,t,n,a){fetch("https://www.mecallapi.com/api/users/"+"".concat(e)).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){"error"===e.status&&n("".concat(e.message)),t(e.user)})).catch((function(e){a("".concat(e.status,"; ").concat(e.statusText))}))},j=function(e,t,n,a){var s={id:e},c={method:"DELETE",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}};fetch("https://www.mecallapi.com/api/users/delete",c).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){"error"===e.status&&n("".concat(e.message)),t()})).catch((function(e){a("".concat(e.status,"; ").concat(e.statusText))}))},p=n(43),m=n(1),u=function(e){return Object(m.jsx)(m.Fragment,{children:e.message&&Object(m.jsx)(p.a,{variant:e.variant,children:e.message})})},h=n(38),f=n(8),b=n(7),O=(n(36),n(23)),x=n.n(O),_=function(e){return Object(m.jsxs)(b.a,{show:e.show,onHide:e.onHide,animation:!1,children:[Object(m.jsx)(b.a.Header,{closeButton:!0,closeLabel:"",children:Object(m.jsx)(b.a.Title,{children:"Profile"})}),Object(m.jsxs)(b.a.Body,{children:[Object(m.jsxs)(h.a,{className:x.a.idBadge,children:[" ID: ",e.person.id," "]}),Object(m.jsx)("img",{src:e.person.avatar,className:x.a.profileImage,alt:"Profile"}),Object(m.jsxs)("div",{className:"text-center ".concat(x.a.personDetails),children:[Object(m.jsxs)("p",{className:x.a.personName,children:[e.person.fname," ",e.person.lname]}),Object(m.jsx)("p",{children:e.person.username})]})]}),Object(m.jsx)(b.a.Footer,{children:Object(m.jsx)(f.a,{variant:"primary",onClick:e.onHide,children:"Close"})})]})},g=function(e,t,n,a,s,c){var o={fname:e,lname:t,username:n,email:n,avatar:l},r={method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}};fetch("https://www.mecallapi.com/api/users/create",r).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){"error"===e.status&&s("".concat(e.message)),a()})).catch((function(e){c("".concat(e.status,"; ").concat(e.statusText))}))},w=function(e,t,n,a,s,c,o){var r={id:a,fname:e,lname:t,username:n,email:n,avatar:l},i={method:"PUT",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}};fetch("https://www.mecallapi.com/api/users/update",i).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){"error"===e.status&&c("".concat(e.message)),s()})).catch((function(e){o("".concat(e.status,"; ").concat(e.statusText))}))},v=n(16),N=n.n(v),C=function(e){var t=Object(a.useState)({}),n=Object(r.a)(t,2),s=n[0],c=n[1],o=function(e){return e&&e.length>0?N.a.invalidInput:""},i=function(t){e.setAlertMsgVariant("danger"),e.setAlertMsg("".concat(e.type," -- Error ").concat(t,"; please try again later"))},l=function(t){e.setAlertMsgVariant("warning"),e.setAlertMsg("".concat(e.type," -- ").concat(t))},d=function(t){e.onHide(),e.getCurrentPeople()};return Object(m.jsxs)(b.a,{show:e.show,onHide:e.onHide,animation:!1,children:[Object(m.jsx)(b.a.Header,{closeButton:!0,closeLabel:"",children:Object(m.jsx)(b.a.Title,{children:e.title})}),Object(m.jsx)(b.a.Body,{children:Object(m.jsxs)("form",{id:"person-info-form",children:[Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"form-first-name",className:"form-label",children:"First Name"}),Object(m.jsx)("input",{type:"text",className:"form-control ".concat(N.a.formControl," ").concat(o(s.firstName)),id:"form-first-name",defaultValue:e.defaults.fname}),s.firstName&&Object(m.jsx)("p",{className:N.a.errorMsg,children:s.firstName})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"form-last-name",className:"form-label",children:"Last name"}),Object(m.jsx)("input",{type:"text",className:"form-control ".concat(N.a.formControl," ").concat(o(s.lastName)),id:"form-last-name",defaultValue:e.defaults.lname}),s.lastName&&Object(m.jsx)("p",{className:N.a.errorMsg,children:s.lastName})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"form-email",className:"form-label",children:"Email address"}),Object(m.jsx)("input",{type:"email",className:"form-control ".concat(N.a.formControl," ").concat(o(s.email)),id:"form-email",defaultValue:e.defaults.email}),s.email&&Object(m.jsx)("p",{className:N.a.errorMsg,children:s.email})]})]})}),Object(m.jsxs)(b.a.Footer,{children:[Object(m.jsx)(f.a,{variant:"secondary",onClick:e.onHide,children:"Cancel"}),Object(m.jsx)(f.a,{variant:"primary",type:"submit",form:"person-info-form",onClick:function(t){t.preventDefault();var n=t.target.form[0].value.trim(),a=t.target.form[1].value.trim(),s=t.target.form[2].value.trim(),o=function(e,t,n){var a={};return""===e&&(a.firstName="First name is required."),""===t&&(a.lastName="Last name is required"),""===n&&(a.email="Email address is required"),""===n||/^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,20}$/i.test(n)||(a.email="Enter a valid email address"),a}(n,a,s);c(o),0===Object.keys(o).length&&(e.onHide(),"UPDATE PROFILE"===e.type?w(n,a,s,e.personId,d,l,i):"ADD PERSON"===e.type&&g(n,a,s,d,l,i))},children:e.submitBtnLabel})]})]})},y=function(e){return Object(m.jsxs)(b.a,{show:e.show,onHide:e.onHide,animation:!1,children:[Object(m.jsx)(b.a.Header,{closeButton:!0,closeLabel:"",children:Object(m.jsx)(b.a.Title,{children:"Delete person"})}),Object(m.jsx)(b.a.Body,{children:Object(m.jsxs)("p",{children:["Confirm that you want to delete ",e.person.fname," ",e.person.lname,". "]})}),Object(m.jsxs)(b.a.Footer,{children:[Object(m.jsx)(f.a,{variant:"secondary",onClick:e.onHide,children:"Cancel"}),Object(m.jsx)(f.a,{variant:"primary",onClick:function(){e.onSubmit(e.person.id)},children:"Delete person"})]})]})},P=n.p+"static/media/surprised-chipmunk.2ceca5f5.png",T=n(31),A=n.n(T),I=function(){return Object(m.jsx)("header",{children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-12",children:Object(m.jsxs)("div",{className:A.a.headerContent,children:[Object(m.jsx)("img",{id:A.a.titleIcon,src:P,alt:"App icon"}),Object(m.jsx)("span",{id:A.a.title,children:"React 2 CRUD"})]})})})})},E=n(57),M=n(21),D=n.n(M),H=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:D.a.apiWarnings,children:[Object(m.jsxs)("div",{className:D.a.titleRow,children:[Object(m.jsx)("div",{className:D.a.warningIconContainer,children:Object(m.jsx)(E.a,{className:D.a.warningIcon})}),Object(m.jsx)("span",{className:D.a.warningTitle,children:"The mecallapi.com third-party API service:"})]}),Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:"Does not allow you to delete or update the first ten people."}),Object(m.jsx)("li",{children:"Resets the people list every ten minutes."}),Object(m.jsx)("li",{children:"Does not provide a token; all users share data."}),Object(m.jsx)("li",{children:"Does not ensure unique IDs."})]})]})})},B=n(39),R=n.n(B),F=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:R.a.copyright,children:"Copyright 2021, React 2 CRUD, Inc., All Rights Reserved."})})},k=n(40),S=n.n(k),L=function(){return Object(m.jsxs)("div",{className:S.a.footer,children:[Object(m.jsx)(H,{}),Object(m.jsx)(F,{})]})},W=n(28),U=n(27),V=n(32),q=n.n(V),J=function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(U.a,{id:q.a.peopleHeaderRow,children:Object(m.jsxs)(W.a,{children:[Object(m.jsx)("div",{className:q.a.contentTitle,children:"People"}),Object(m.jsx)(f.a,{variant:"primary",id:q.a.addBtn,onClick:e.showAddModal,children:"Add a person"})]})})})},Z=n(41),X=n(17),G=n.n(X),z=function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(U.a,{children:Object(m.jsx)(W.a,{children:Object(m.jsxs)(Z.a,{striped:!0,id:G.a.peopleTable,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{id:G.a.idCol,children:"ID"}),Object(m.jsx)("th",{id:G.a.firstnameCol,children:"First Name"}),Object(m.jsx)("th",{id:G.a.lastnameCol,children:"Last Name"}),Object(m.jsx)("th",{id:G.a.emailCol,children:"Email"}),Object(m.jsx)("th",{id:G.a.actionsCol,children:"Actions"})]})}),Object(m.jsx)("tbody",{children:e.personRows})]})})})})},K=n(58),Q=n(59),Y=n(60),$=n(33),ee=n.n($),te=function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e.person.id}),Object(m.jsx)("td",{children:e.person.fname}),Object(m.jsx)("td",{children:e.person.lname}),Object(m.jsx)("td",{children:e.person.username}),Object(m.jsxs)("td",{children:[Object(m.jsxs)(f.a,{variant:"primary",className:ee.a.actionBtn,title:"Display profile",onClick:function(){e.showProfileModal(e.person)},children:[Object(m.jsx)(K.a,{}),"         "]}),Object(m.jsx)(f.a,{variant:"primary",className:ee.a.actionBtn,title:"Update profile",onClick:function(){e.showUpdateModal(e.person)},children:Object(m.jsx)(Q.a,{})}),Object(m.jsxs)(f.a,{variant:"danger",className:ee.a.actionBtn,title:"Delete",onClick:function(){e.showDeleteModal(e.person)},children:[Object(m.jsx)(Y.a,{}),"   "]})]})]})},ne=function(e,t){fetch("https://www.mecallapi.com/api/users",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(t){e(t)})).catch((function(e){t("".concat(e.status,"; ").concat(e.statusText))}))},ae=(n(54),n(34)),se=n.n(ae),ce=function(){var e=Object(a.useState)(""),t=Object(r.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),o=Object(r.a)(c,2),l=o[0],p=o[1],h=Object(a.useState)([]),f=Object(r.a)(h,2),b=f[0],O=f[1],x=function(e){s("FETCH PEOPLE -- Error ".concat(e,"; please try again later")),p("danger")},g=function(e){if(e){var t=e.reverse().map((function(e){return Object(m.jsx)(te,{person:e,showProfileModal:k,showUpdateModal:G,showDeleteModal:ee},e.id)}));O(t)}},w=function(){s(""),ne(g,x)};Object(a.useEffect)((function(){w()}),[]);var v=Object(a.useState)(!1),N=Object(r.a)(v,2),P=N[0],T=N[1],A=Object(a.useState)([]),E=Object(r.a)(A,2),M=E[0],D=E[1],H=Object(a.useState)(!1),B=Object(r.a)(H,2),R=B[0],F=B[1],k=function(e){s(""),d(e.id,U,W,S)},S=function(e){p("danger"),s("READ PROFILE -- Error ".concat(e,"; please try again later"))},W=function(e){p("warning"),s("READ PROFILE -- ".concat(e))},U=function(e){D(e),F(!0)},V=Object(a.useState)(!1),q=Object(r.a)(V,2),Z=q[0],X=q[1],G=function(e){s(""),D(e),X(!0)},K=Object(a.useState)(!1),Q=Object(r.a)(K,2),Y=Q[0],$=Q[1],ee=function(e){s(""),D(e),$(!0)},ae=function(e){p("danger"),s("DELETE PERSON -- Error ".concat(e,"; please try again later"))},ce=function(e){p("warning"),s("DELETE PERSON -- ".concat(e))},oe=function(){w()};return Object(m.jsxs)("div",{className:se.a.App,children:[Object(m.jsxs)(i.a,{fluid:!0,className:se.a.content,children:[Object(m.jsx)(I,{}),Object(m.jsxs)("div",{className:se.a.container,children:[Object(m.jsx)(J,{showAddModal:function(){s(""),T(!0)}}),Object(m.jsx)(u,{message:n,variant:l}),Object(m.jsx)(z,{personRows:b,showProfileModal:k,showUpdateModal:G,showDeleteModal:ee})]}),Object(m.jsx)(_,{show:R,person:M,onHide:function(){F(!1)}}),Object(m.jsx)(C,{show:Z,type:"UPDATE PROFILE",title:"Update person",submitBtnLabel:"Update person",personId:M.id,defaults:{fname:M.fname,lname:M.lname,email:M.username},onHide:function(){X(!1)},getCurrentPeople:w,setAlertMsg:s,setAlertMsgVariant:p}),Object(m.jsx)(C,{show:P,type:"ADD PERSON",personId:null,title:"Add a person",submitBtnLabel:"Add person",defaults:{fname:"",lname:"",email:""},onHide:function(){T(!1)},getCurrentPeople:w,setAlertMsg:s,setAlertMsgVariant:p}),Object(m.jsx)(y,{show:Y,person:M,onHide:function(){$(!1)},onSubmit:function(e){$(!1),j(e,oe,ce,ae)}})]}),Object(m.jsx)(L,{})]})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,61)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),c(e),o(e)}))};o.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(ce,{})}),document.getElementById("root")),oe()}},[[55,1,2]]]);
//# sourceMappingURL=main.2597ae61.chunk.js.map